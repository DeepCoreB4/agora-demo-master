(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["message"],{"0250":function(t,e,n){"use strict";n.r(e);var i=n("1da1"),a=n("d4ec"),r=n("bee2"),s=n("262e"),o=n("2caf"),l=(n("b0c0"),n("159b"),n("b64b"),n("ac1f"),n("1276"),n("96cf"),n("9ab4")),c=n("a026"),u=n("2fe1"),h=n("06a0"),d=(n("cfd7"),n("da90")),p=(n("d3b7"),n("caad"),n("2532"),n("5319"),n("69a0")),f=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){var t;return Object(a["a"])(this,n),t=e.apply(this,arguments),t.OSSUrl="",t.limit=1,t.currentAttachmentId="",t.url="",t.resourceId="",t.ossKey="",t.OSSParam=void 0,t}return Object(r["a"])(n,[{key:"startUpload",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n,i,a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(t.prev=0,n=new FormData,i=0,a=Object.keys(this.OSSParam);i<a.length;i++)r=a[i],n.append(r,this.OSSParam[r]);return n.append("file",e.file),t.next=6,this.$http.post(this.OSSUrl,n);case 6:return this.OSSUrl="",this.OSSParam=void 0,t.next=10,this.$http.post("/api/v2/identity/publishAttachment",{attachmentId:this.currentAttachmentId});case 10:s=t.sent,console.info(s),this.url=s.data.url,this.resourceId=s.data.data.resourceId,this.ossKey=s.data.data.ossKey,this.updateUrl(this.url,this.resourceId,this.ossKey),this.$message({message:this.$t("UploadSuccess"),type:"success"}),t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](0),this.$message.error(this.$t("FailedToUploadAttachment"));case 22:case"end":return t.stop()}}),t,this,[[0,19]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"handleExceed",value:function(){this.$message.error(this.$t("MaxAmountAttachment"))}},{key:"computeFileHash",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var n=File.prototype.slice||File.prototype["mozSlice"]||File.prototype["webkitSlice"],a=2097152,r=Math.ceil(e.size/a),s=0,o="",l=new p.ArrayBuffer,c=new FileReader,u=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=s*a,r=i+a>=e.size?e.size:i+a,c.readAsArrayBuffer(n.call(e,i,r));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();c.onload=function(e){l.append(e.target.result),s++,s<r?u():(o=l.end(),t(o))},u()})));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"handleRemove",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e=this.resourceId,t.next=4,this.$http.delete("/api/v2/identity/deleteAttachment",{params:{attachmentId:e}});case 4:return this.$message({message:this.$t("DeleteSuccess"),type:"success"}),this.url="",this.currentAttachmentId="",this.resourceId="",this.$emit("updateURL","",""),t.abrupt("return");case 12:t.prev=12,t.t0=t["catch"](0),this.$message.error(this.$t("DeleteError"));case 15:return t.abrupt("return",Promise.reject());case 16:case"end":return t.stop()}}),t,this,[[0,12]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"beforeAvatarUpload",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n,i,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,n="image/png"===e.type||"image/jpg"===e.type||"image/jpeg"===e.type||"image/bmp"===e.type||"image/gif"===e.type,n){t.next=5;break}return this.$message.error(this.$t("ImgTypeError")),t.abrupt("return",Promise.reject());case 5:if(!(e.size>20971520)){t.next=8;break}return this.$message.warning(this.$t("FileSizeTooLarge20")),t.abrupt("return",Promise.reject());case 8:if(!this.resourceId){t.next=11;break}return t.next=11,this.handleRemove();case 11:return t.next=13,this.computeFileHash(e);case 13:return i=t.sent,a={file_hash:i,mime_type:e.type||"application/octet-stream",file_ext:e.name.includes(".")?e.name.split(".").pop().replace(/\s+/g,""):"",file_size:e.size},t.next=17,this.$http.post("/api/v2/identity/prepareAttachment",{fileObject:a,companyId:h["b"].info.companyId});case 17:r=t.sent,this.OSSUrl=r.data.oss_metadata.url,this.OSSParam=r.data.oss_metadata.params,this.currentAttachmentId=r.data.attachment_id,t.next=26;break;case 23:t.prev=23,t.t0=t["catch"](0),this.$message.error(this.$t("FailedToUploadAttachment"));case 26:case"end":return t.stop()}}),t,this,[[0,23]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"updateUrl",value:function(t,e,n){this.$emit("updateURL",t,e,n)}},{key:"showUrl",value:function(t){this.url=t}}]),n}(c["default"]);f=Object(l["a"])([Object(u["b"])({components:{},template:'\n    <div class="upload avatar-component">\n      <el-upload\n        class="avatar-uploader"\n        action="action"\n        :http-request="startUpload"\n        accept="image/jpeg,image/jpg,image/png,image/bmp,image/gif"\n        :before-upload="beforeAvatarUpload"\n        :on-exceed="handleExceed"\n        :show-file-list="false"\n      >\n        <i class="el-icon-plus avatar-uploader-icon" v-show="!url"></i>\n        <img v-if="url" :src="url" class="avatar" />\n      </el-upload>\n    </div>\n  '})],f);var m=f,g=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){var t;return Object(a["a"])(this,n),t=e.apply(this,arguments),t.validateName=function(e,n,i){return n?Object(d["c"])(n)?void i():i(new Error(t.$t("NameWarn"))):i(new Error(t.$t("RequiredMissing")))},t.validateCreditCode=function(e,n,i){return n?Object(d["f"])(n)?void i():i(new Error(t.$t("InvalidUSCINumber"))):i(new Error(t.$t("RequiredMissing")))},t.validatePhone=function(e,n,i){if(!n)return i(new Error(t.$t("RequiredMissing")));i()},t.legalPersonName=function(e,n,i){if(n&&!Object(d["a"])(n))return i(new Error(t.$t("legalNameWarn")));i()},t.legalPersonNumber=function(e,n,i){if(n&&!Object(d["e"])(n))return i(new Error(t.$t("InvalidIDNumber")));i()},t.operatorName=function(e,n,i){if(n&&!Object(d["a"])(n))return i(new Error(t.$t("operatorNameWarn")));i()},t.operatorNumber=function(e,n,i){if(n&&!Object(d["e"])(n))return i(new Error(t.$t("InvalidIDNumber")));i()},t.validateBankAccount=function(e,n,i){if(!Object(d["i"])(n))return i(new Error(t.$t("InvalidParam")));i()},t.userInfo=h["b"].info,t.identity={name:"",number:"",creditCode:"",address:"",phone:"",licensePhoto:"",legalPersonName:"",legalPersonNumber:"",operatorName:"",operatorNumber:"",licensePhotoKey:"",bankName:"",bankBranch:"",bankAccount:""},t.rules={name:[{required:!0,validator:t.validateName,trigger:"blur"}],creditCode:[{required:!0,validator:t.validateCreditCode,trigger:"blur"}],phone:[{required:!0,validator:t.validatePhone,trigger:"blur"}],address:[{required:!0,message:t.$t("RequiredMissing"),trigger:"blur"}],licensePhoto:[{required:!0,message:t.$t("RequiredMissing"),trigger:"blur"}],legalPersonName:[{validator:t.legalPersonName,trigger:"blur"}],legalPersonNumber:[{validator:t.legalPersonNumber,trigger:"blur"}],operatorName:[{validator:t.operatorName,trigger:"blur"}],operatorNumber:[{validator:t.operatorNumber,trigger:"blur"}],bankName:[{required:!0,message:t.$t("RequiredMissing"),trigger:"blur"}],bankBranch:[{required:!0,message:t.$t("RequiredMissing"),trigger:"blur"}],bankAccount:[{required:!0,message:t.$t("RequiredMissing"),trigger:"blur"},{validator:t.validateBankAccount,trigger:"blur"}]},t.originIdentity={},t.disableBtn=!1,t.infoPromised=!1,t.showNextStep=!1,t.step=1,t.photoBack="",t}return Object(r["a"])(n,[{key:"created",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getFullIdentityInfo();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getFullIdentityInfo",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$http.get("/api/v2/identity/full-info",{params:{companyId:h["b"].info.companyId}});case 3:e=t.sent,n=e.data,n&&-1===n.basicInfo.status&&this.$router.push({path:"/"}),!n||2!==h["b"].info.company.source&&"CN"===h["b"].info.company.country||this.$router.push({path:"/"}),n&&n.companyInfo&&n.companyInfo.name&&2!==n.companyInfo.status?(this.originIdentity=n.companyInfo,this.step=3,this.identity.name=n.companyInfo.name,this.identity.bankAccount=n.companyInfo.bankAccount,0===this.originIdentity.identityType&&1===this.originIdentity.status&&this.back()):2===n.companyInfo.status&&(Object.keys(this.identity).forEach((function(t){i.identity[t]=n.companyInfo[t]})),n.companyInfo["licensePhotoUrl"]&&(this.$refs["avatar"].showUrl(n.companyInfo["licensePhotoUrl"]),this.photoBack=n.companyInfo["licensePhotoUrl"]),console.info(this.identity)),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.info(t.t0);case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"checkSocialCreditCode",value:function(t){var e=/^[0-9A-Z]+$/;if(18!==t.length||!1===e.test(t))return!1;for(var n,i,a=0,r=[1,3,9,27,19,26,16,17,20,29,25,13,8,24,10,30,28],s="0123456789ABCDEFGHJKLMNPQRTUWXY",o=0;o<t.length-1;o++)n=t.substring(o,o+1),i=s.indexOf(n),a+=i*r[o];var l=31-a%31;31===l&&(l=0);var c="0,1,2,3,4,5,6,7,8,9,A,B,C,D,E,F,G,H,J,K,L,M,N,P,Q,R,T,U,W,X,Y",u=c.split(",");l=u[l];var h=t.substring(17,18);return l===h}},{key:"checkParam",value:function(){if(!this.identity.name)return this.$message.warning(this.$t("RequiredMissing")),!1;var t=/^([\u4e00-\u9fa5]|\(|\)|（|）)+$/g;return t.test(this.identity.name)?this.identity.creditCode?this.checkSocialCreditCode(this.identity.creditCode)?this.identity.address&&this.identity.licensePhoto&&this.identity.phone&&this.identity.legalPersonName&&this.identity.legalPersonNumber?Object(d["j"])(this.identity.phone)?Object(d["a"])(this.identity.legalPersonName)?this.identity.operatorName&&!Object(d["a"])(this.identity.operatorName)?(this.$message.warning(this.$t("operatorNameWarn")),!1):!(this.identity.operatorNumber&&!Object(d["e"])(this.identity.operatorNumber)||!Object(d["e"])(this.identity.legalPersonNumber))||(this.$message.warning(this.$t("InvalidIDNumber")),!1):(this.$message.warning(this.$t("legalNameWarn")),!1):(this.$message.warning(this.$t("PhoneError")),!1):(this.$message.warning(this.$t("RequiredMissing")),!1):(this.$message.warning(this.$t("InvalidUSCINumber")),!1):(this.$message.warning(this.$t("RequiredMissing")),!1):(this.$message.warning(this.$t("NameWarn")),!1)}},{key:"updatePhotoBackURL",value:function(t,e,n){this.photoBack=t,this.identity.licensePhoto=e,this.identity.licensePhotoKey=n,this.$refs.licensePhoto.clearValidate()}},{key:"back",value:function(){this.$router.push({path:"/settings/authentication"})}},{key:"goPayment",value:function(){this.$router.push({path:"/finance/deposit/alipay"})}},{key:"verifyInfo",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$refs["submit-form"].validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.step=2,t.next=5;break;case 4:return t.abrupt("return",!1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"save",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.disableBtn=!0,e=this.$message.info(this.$t("InSubmitting")),t.prev=2,t.next=5,this.$http.post("/api/v2/identity/enterprise",{name:this.identity.name,creditCode:this.identity.creditCode,licensePhoto:this.identity.licensePhoto,licensePhotoKey:this.identity.licensePhotoKey,bankName:this.identity.bankName,bankBranch:this.identity.bankBranch,bankAccount:this.identity.bankAccount});case 5:e.close(),this.step=3,t.next=14;break;case 9:t.prev=9,t.t0=t["catch"](2),this.disableBtn=!1,e.close(),t.t0.response&&9008===t.t0.response.data.code?this.$message.error(this.$t("NumberExist")):t.t0.response&&9017===t.t0.response.data.code?this.$message.error(this.$t("BankAccountExist")):t.t0.response&&9018===t.t0.response.data.code?this.$message.error(this.$t("EnterpriseNameExist")):this.$message.error(this.$t("SubmitFailed"));case 14:case"end":return t.stop()}}),t,this,[[2,9]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"edit",value:function(){this.step=1,this.$refs["avatar"].showUrl(this.photoBack)}}]),n}(c["default"]);g=Object(l["a"])([Object(u["b"])({components:{AvatarUpload:m},template:'\n    <div class="page enterprise-auth">\n      <div class="module-title">{{ $t(\'EnterpriseAuthTitle\') }}</div>\n      <div class="card auth-container">\n        <div class="d-flex flex-column pb-2 align-items-baseline border-bottom">\n          <label v-html=\'$t("EnterpriseAuthTips")\'></label>\n        </div>\n        <div class="steps">\n          <el-steps :active="step" finish-status="success" simple>\n            <el-step :title="$t(\'Submitted authentication information\')"></el-step>\n            <el-step :title="$t(\'Check authentication information\')"></el-step>\n            <el-step :title="$t(\'SubmitSuccess\')"></el-step>\n          </el-steps>\n        </div>\n        <div class="step1-form" v-show="step === 1">\n          <div class="submit-form">\n            <el-form\n              :model="identity"\n              :rules="rules"\n              :label-width="userInfo.locale === \'en\' ? \'250px\' : \'200px\'"\n              ref="submit-form"\n            >\n              <el-form-item :label="$t(\'EnterpriseName\')" prop="name" class="input-item">\n                <el-input v-model="identity.name" maxlength="32"></el-input>\n              </el-form-item>\n              <el-form-item :label="$t(\'USCINumber\')" prop="creditCode" class="input-item">\n                <el-input v-model="identity.creditCode"></el-input>\n              </el-form-item>\n              <el-form-item\n                :label="$t(\'LicensePhoto\')"\n                prop="licensePhoto"\n                class="input-item"\n                :inline-message="true"\n                ref="licensePhoto"\n              >\n                <AvatarUpload @updateURL="updatePhotoBackURL" ref="avatar"></AvatarUpload>\n                <span class="tip-line">{{ $t(\'LicensePhotoTip\') }}</span>\n              </el-form-item>\n              <el-form-item :label="$t(\'BankName\')" prop="bankName" class="input-item">\n                <el-input v-model="identity.bankName" maxlength="256"></el-input>\n              </el-form-item>\n              <el-form-item :label="$t(\'BankBranch\')" prop="bankBranch" class="input-item">\n                <el-input v-model="identity.bankBranch" maxlength="256"></el-input>\n              </el-form-item>\n              <el-form-item :label="$t(\'AgentName\')" prop="operatorName" class="input-item">\n                <span>{{ identity.name }}</span>\n              </el-form-item>\n              <el-form-item :label="$t(\'BankAccount\')" prop="bankAccount" class="input-item">\n                <el-input v-model="identity.bankAccount"></el-input>\n              </el-form-item>\n            </el-form>\n          </div>\n          <div class="mx-auto w-500">\n            <input type="checkbox" v-model="infoPromised" />\n            <span class="ml-1"> {{ $t(\'PromiseInfo\') }} </span>\n          </div>\n        </div>\n        <div class="step2-form" v-if="step === 2">\n          <div class="line">\n            <label>{{ $t(\'Authentication Type\') }}</label>\n            <span>{{ $t(\'Authentication Type Tip\', { companyName: identity.name }) }}</span>\n          </div>\n          <hr />\n          <div class="line">\n            <label>{{ $t(\'Payer information\') }}</label>\n            <span class="edit" @click="edit">{{ $t(\'Edit\') }}</span>\n          </div>\n          <div class="line">\n            <label class="sub-label">{{ $t(\'Name\') }}</label>\n            <span>{{ identity.name }}</span>\n          </div>\n          <div class="line">\n            <label class="sub-label">{{ $t(\'BankAccount\') }}</label>\n            <span>{{ identity.bankAccount }}</span>\n          </div>\n          <hr />\n\n          <div class="line">\n            <label>{{ $t(\'Payee information\') }}</label>\n          </div>\n\n          <div class="line">\n            <label class="sub-label">{{ $t(\'Name\') }}</label>\n            <span>上海兆言网络科技有限公司</span>\n          </div>\n          <div class="line">\n            <label class="sub-label">{{ $t(\'Account Bank\') }}</label>\n            <span>招商银行股份有限公司上海创智天地支行</span>\n          </div>\n          <div class="line">\n            <label class="sub-label">{{ $t(\'Receiving account\') }}</label>\n            <span>121 912 274 010 901</span>\n          </div>\n          <div class="line">\n            <label class="sub-label">{{ $t(\'Swift Code\') }}</label>\n            <span>CMBCCNBSXXX</span>\n          </div>\n          <hr />\n        </div>\n\n        <div class="step2-form" v-if="step === 3">\n          <div class="">\n            <h3>{{ $t(\'Received Title\') }}</h3>\n            <div>\n              <span>{{ $t(\'Received Tip\', { companyName: identity.name, bankAccount: identity.bankAccount }) }}</span>\n            </div>\n          </div>\n          <hr />\n\n          <div class="line">\n            <label>{{ $t(\'Payee information\') }}:</label>\n          </div>\n\n          <div class="line">\n            <label class="sub-label">{{ $t(\'Name\') }}</label>\n            <span>上海兆言网络科技有限公司</span>\n          </div>\n          <div class="line">\n            <label class="sub-label">{{ $t(\'Account Bank\') }}</label>\n            <span>招商银行股份有限公司上海创智天地支行</span>\n          </div>\n          <div class="line">\n            <label class="sub-label">{{ $t(\'Receiving account\') }}</label>\n            <span>121 912 274 010 901</span>\n          </div>\n          <div class="line">\n            <label class="sub-label">{{ $t(\'Swift Code\') }}</label>\n            <span>CMBCCNBSXXX</span>\n          </div>\n          <hr />\n        </div>\n\n        <div class="mx-auto">\n          <div class="edit-line" v-if="step === 1">\n            <console-button\n              class="console-btn-primary"\n              size="lg"\n              :disabled="disableBtn || !infoPromised"\n              @click="verifyInfo"\n            >\n              {{ $t(\'Next\') }}\n            </console-button>\n            <console-button class="console-btn-white" size="lg" @click="back"> {{ $t(\'Cancel\') }}</console-button>\n          </div>\n\n          <div class="save-line" v-if="step === 2">\n            <div class="warning">\n              <el-alert\n                :title="$t(\'AuthWarning\')"\n                type="warning"\n                :closable="false"\n                style="padding:12px 15px;border: 1px solid #F0C996;"\n                show-icon\n              >\n              </el-alert>\n            </div>\n            <div>\n              <console-button\n                class="console-btn-primary"\n                size="lg"\n                :disabled="disableBtn || !infoPromised"\n                @click="save"\n              >\n                {{ $t(\'Submit\') }}\n              </console-button>\n              <console-button class="console-btn-white" size="lg" @click="back"> {{ $t(\'Cancel\') }}</console-button>\n            </div>\n          </div>\n\n          <div class="save-line" v-if="step === 3">\n            {{ $t(\'SavedTip\') }}\n            <div class="mt-20">\n              <el-button class="button button-outline-mid-secondary" @click="back"> {{ $t(\'Back\') }}</el-button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  '})],g);e["default"]=g},"0aab":function(t,e,n){"use strict";n.r(e);var i=n("1da1"),a=n("d4ec"),r=n("bee2"),s=n("262e"),o=n("2caf"),l=(n("96cf"),n("b0c0"),n("ac1f"),n("5319"),n("a15b"),n("a9e3"),n("9ab4")),c=n("a026"),u=n("2fe1"),h=(n("9959"),n("1b40")),d=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){return Object(a["a"])(this,n),e.apply(this,arguments)}return Object(r["a"])(n,[{key:"messageContent",get:function(){if(this.message.content){var t=/(<([^>]+)>)|&nbsp;/gi;return this.message.content.replace(t,"")}}}]),n}(c["default"]);Object(l["a"])([Object(h["b"])({default:null,type:Object})],d.prototype,"message",void 0),Object(l["a"])([Object(h["b"])({default:function(){return function(){}},type:Function})],d.prototype,"onClick",void 0),Object(l["a"])([Object(h["b"])({default:0,type:Number})],d.prototype,"index",void 0),Object(l["a"])([Object(h["b"])({default:0,type:Number})],d.prototype,"selectedIndex",void 0),d=Object(l["a"])([Object(u["b"])({template:'\n    <div class="message-box">\n      <div\n        class="message-content"\n        :class="{ \'active-message\': index === selectedIndex, \'read-message\': index !== selectedIndex && message.readStatus }"\n        @click="onClick(index)"\n      >\n        <div class="d-flex text-truncate">\n          <div\n            :class="{ \'message-box-title mr-2\': true, \'title-color\': !message.readStatus || index === selectedIndex, \'read-message\': index !== selectedIndex && message.readStatus }"\n          >\n            {{ message.title }}:\n          </div>\n          <div class="text-truncate">{{ message.content | formatHtml() }}</div>\n        </div>\n        <div class="message-time">{{ $t(\'Published\') }}: {{ message.createTime | formatDate() }}</div>\n      </div>\n    </div>\n  '})],d);var p=d,f=n("06a0"),m=(n("498b"),n("d5ff")),g=n("ef04"),v=n("ec1d"),b=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){var t;return Object(a["a"])(this,n),t=e.apply(this,arguments),t.currentMessage={},t.loading=!1,t.enableFinance=f["b"].info.permissions["FinanceCenter"]>0,t.textDefaultId=[1,2,4],t.condition={page:1,limit:10,total:0,type:"all",offset:0,readStatus:"",selectedIndex:0,pagerCount:4},t.filterType="",t.messageSetting={},t.messages=[],t.allTabs=[],t.allTabsKeys=[],t.NoDataImg=g,t.settingsIcon=v,t}return Object(r["a"])(n,[{key:"switchTab",value:function(t){this.condition.type=t.name,this.condition.offset=0,this.$router.replace({query:Object.assign({},this.condition)}),this.getMessages()}},{key:"readMessage",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.currentMessage=this.messages[e],this.condition.selectedIndex=e,this.$router.replace({query:Object.assign({},this.condition)}),!this.currentMessage){t.next=7;break}return this.messages[e].readStatus=!0,t.next=7,this.$http.put("/api/v2/message/read",{id:this.currentMessage.msgId});case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"changePage",value:function(){this.condition.offset=this.condition.limit*(this.condition.page-1),this.condition.selectedIndex=0,this.$router.replace({query:Object.assign({},this.condition)}),this.getMessages()}},{key:"setReadStatus",value:function(t){this.condition.readStatus=t,this.condition.offset=0,this.$router.replace({query:Object.assign({},this.condition)}),this.getMessages()}},{key:"getMessages",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,"all"===this.condition.type&&(this.filterType=this.allTabsKeys.join(",")),t.next=5,this.$http.get("/api/v2/message/site-messages",{params:Object.assign({},this.condition,{filterType:this.filterType})});case 5:e=t.sent,this.messages=e.data.elements,this.condition.total=e.data.totalSize,this.condition.selectedIndex>this.messages.length-1?(this.currentMessage={},this.condition.selectedIndex=0):this.currentMessage=this.messages[this.condition.selectedIndex],t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),this.$message.error(this.$t("FailedGetMessage"));case 14:this.readMessage(this.condition.selectedIndex),this.loading=!1;case 16:case"end":return t.stop()}}),t,this,[[1,11]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"getMessageSetting",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$http.get("/api/v2/notifications");case 3:for(e=t.sent,n=e.data,i=0;i<n.length;i++)this.messageSetting[n[i].key]=n[i].setting.dashboardOpen||0;t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"created",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.condition.selectedIndex=Number(this.$route.query.selectedIndex)||0,e=this.$t("messagesType"),this.condition.type=this.$route.query.type||e[0].type,this.condition.offset=this.$route.query.offset||0,this.condition.page=Number(this.condition.offset/this.condition.limit)+1,n=this.enableFinance?this.$t("messagesType"):this.$t("messagesTypeWithoutFinance"),t.next=8,this.getMessageSetting();case 8:for(i in n)1!==this.messageSetting[n[i].type]&&"all"!==n[i].type||("all"!==n[i].type&&this.allTabsKeys.push(n[i].type),this.allTabs.push(n[i]));this.getMessages();case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"openNotification",value:function(){this.$router.push({path:"/settings/notification"})}}]),n}(c["default"]);b=Object(l["a"])([Object(u["b"])({components:{Message:p,"my-pagination":m["a"]},template:'\n    <div class="d-flex flex-column mh-600">\n      <div class="module-title">\n        <el-button :class=\'{ "active-btn": condition.readStatus === ""}\' class="message-btn" @click=\'setReadStatus("")\'>\n          {{ $t(\'All\') }}\n        </el-button>\n        <el-button\n          :class=\'{ "active-btn": condition.readStatus === false}\'\n          class="message-btn"\n          @click="setReadStatus(false)"\n        >\n          {{ $t(\'Unread\') }}\n        </el-button>\n        <el-button\n          :class=\'{ "active-btn": condition.readStatus === true }\'\n          class="message-btn"\n          @click="setReadStatus(true)"\n        >\n          {{ $t(\'Read\') }}\n        </el-button>\n        <el-button class="message-btn" style="float: right; vertical-align: middle" @click="openNotification">\n          <img height="20" :src="settingsIcon" style="vertical-align: sub" />\n          {{ $t(\'Notification\') }}\n        </el-button>\n        <el-tab-pane :label=\'$t("Notification")\' name="notification"> </el-tab-pane>\n      </div>\n      <el-tabs v-model="condition.type" type="card" @tab-click="switchTab" v-if="enableFinance" class="message-tab">\n        <el-tab-pane v-for="(message, key) of allTabs" :key="key" :name="message.type" :label="message.name">\n        </el-tab-pane>\n      </el-tabs>\n\n      <el-tabs v-model="condition.type" type="card" @tab-click="switchTab" v-else class="message-tab">\n        <el-tab-pane v-for="(message, key) of allTabs" :key="key" :name="message.type" :label="message.name">\n        </el-tab-pane>\n      </el-tabs>\n\n      <div class="d-flex flex-row message-center" v-if="messages.length > 0" v-loading="loading">\n        <div class="message-list">\n          <Message\n            v-for="(message, key) of messages"\n            :message="message"\n            :key="key"\n            :onClick="readMessage"\n            :index="key"\n            :selectedIndex="condition.selectedIndex"\n          >\n          </Message>\n          <div class="d-flex justify-between message-page">\n            <div class="my-auto">{{ $t(\'Total\') }}: {{ condition.total }}</div>\n            <div class="page-box" v-if="true">\n              <my-pagination\n                v-model="condition"\n                layout="prev, pager, next"\n                @change="changePage"\n                style="margin-top: 0px"\n              ></my-pagination>\n            </div>\n          </div>\n        </div>\n\n        <div class="message-card">\n          <div class="message-title title-color">{{ currentMessage.title }}</div>\n          <div class="d-flex flex-row message-subtitle">\n            <div>{{ $t(\'Published\') }}:</div>\n            <div class="ml-1">{{ currentMessage.createTime | formatDate() }}</div>\n          </div>\n          <div class="message-content-block" v-html="currentMessage.content"></div>\n        </div>\n      </div>\n\n      <div class="card message-center" v-else v-loading="loading">\n        <div class="m-auto">\n          <img width="240px" :src="NoDataImg" />\n          <div class="empty-text mt-2 text-center">{{ $t(\'NoMessage\') }}</div>\n        </div>\n      </div>\n    </div>\n  '})],b);e["default"]=b},"498b":function(t,e,n){},"69a0":function(t,e,n){(function(e){t.exports=e()})((function(t){"use strict";var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(t,e){var n=t[0],i=t[1],a=t[2],r=t[3];n+=(i&a|~i&r)+e[0]-680876936|0,n=(n<<7|n>>>25)+i|0,r+=(n&i|~n&a)+e[1]-389564586|0,r=(r<<12|r>>>20)+n|0,a+=(r&n|~r&i)+e[2]+606105819|0,a=(a<<17|a>>>15)+r|0,i+=(a&r|~a&n)+e[3]-1044525330|0,i=(i<<22|i>>>10)+a|0,n+=(i&a|~i&r)+e[4]-176418897|0,n=(n<<7|n>>>25)+i|0,r+=(n&i|~n&a)+e[5]+1200080426|0,r=(r<<12|r>>>20)+n|0,a+=(r&n|~r&i)+e[6]-1473231341|0,a=(a<<17|a>>>15)+r|0,i+=(a&r|~a&n)+e[7]-45705983|0,i=(i<<22|i>>>10)+a|0,n+=(i&a|~i&r)+e[8]+1770035416|0,n=(n<<7|n>>>25)+i|0,r+=(n&i|~n&a)+e[9]-1958414417|0,r=(r<<12|r>>>20)+n|0,a+=(r&n|~r&i)+e[10]-42063|0,a=(a<<17|a>>>15)+r|0,i+=(a&r|~a&n)+e[11]-1990404162|0,i=(i<<22|i>>>10)+a|0,n+=(i&a|~i&r)+e[12]+1804603682|0,n=(n<<7|n>>>25)+i|0,r+=(n&i|~n&a)+e[13]-40341101|0,r=(r<<12|r>>>20)+n|0,a+=(r&n|~r&i)+e[14]-1502002290|0,a=(a<<17|a>>>15)+r|0,i+=(a&r|~a&n)+e[15]+1236535329|0,i=(i<<22|i>>>10)+a|0,n+=(i&r|a&~r)+e[1]-165796510|0,n=(n<<5|n>>>27)+i|0,r+=(n&a|i&~a)+e[6]-1069501632|0,r=(r<<9|r>>>23)+n|0,a+=(r&i|n&~i)+e[11]+643717713|0,a=(a<<14|a>>>18)+r|0,i+=(a&n|r&~n)+e[0]-373897302|0,i=(i<<20|i>>>12)+a|0,n+=(i&r|a&~r)+e[5]-701558691|0,n=(n<<5|n>>>27)+i|0,r+=(n&a|i&~a)+e[10]+38016083|0,r=(r<<9|r>>>23)+n|0,a+=(r&i|n&~i)+e[15]-660478335|0,a=(a<<14|a>>>18)+r|0,i+=(a&n|r&~n)+e[4]-405537848|0,i=(i<<20|i>>>12)+a|0,n+=(i&r|a&~r)+e[9]+568446438|0,n=(n<<5|n>>>27)+i|0,r+=(n&a|i&~a)+e[14]-1019803690|0,r=(r<<9|r>>>23)+n|0,a+=(r&i|n&~i)+e[3]-187363961|0,a=(a<<14|a>>>18)+r|0,i+=(a&n|r&~n)+e[8]+1163531501|0,i=(i<<20|i>>>12)+a|0,n+=(i&r|a&~r)+e[13]-1444681467|0,n=(n<<5|n>>>27)+i|0,r+=(n&a|i&~a)+e[2]-51403784|0,r=(r<<9|r>>>23)+n|0,a+=(r&i|n&~i)+e[7]+1735328473|0,a=(a<<14|a>>>18)+r|0,i+=(a&n|r&~n)+e[12]-1926607734|0,i=(i<<20|i>>>12)+a|0,n+=(i^a^r)+e[5]-378558|0,n=(n<<4|n>>>28)+i|0,r+=(n^i^a)+e[8]-2022574463|0,r=(r<<11|r>>>21)+n|0,a+=(r^n^i)+e[11]+1839030562|0,a=(a<<16|a>>>16)+r|0,i+=(a^r^n)+e[14]-35309556|0,i=(i<<23|i>>>9)+a|0,n+=(i^a^r)+e[1]-1530992060|0,n=(n<<4|n>>>28)+i|0,r+=(n^i^a)+e[4]+1272893353|0,r=(r<<11|r>>>21)+n|0,a+=(r^n^i)+e[7]-155497632|0,a=(a<<16|a>>>16)+r|0,i+=(a^r^n)+e[10]-1094730640|0,i=(i<<23|i>>>9)+a|0,n+=(i^a^r)+e[13]+681279174|0,n=(n<<4|n>>>28)+i|0,r+=(n^i^a)+e[0]-358537222|0,r=(r<<11|r>>>21)+n|0,a+=(r^n^i)+e[3]-722521979|0,a=(a<<16|a>>>16)+r|0,i+=(a^r^n)+e[6]+76029189|0,i=(i<<23|i>>>9)+a|0,n+=(i^a^r)+e[9]-640364487|0,n=(n<<4|n>>>28)+i|0,r+=(n^i^a)+e[12]-421815835|0,r=(r<<11|r>>>21)+n|0,a+=(r^n^i)+e[15]+530742520|0,a=(a<<16|a>>>16)+r|0,i+=(a^r^n)+e[2]-995338651|0,i=(i<<23|i>>>9)+a|0,n+=(a^(i|~r))+e[0]-198630844|0,n=(n<<6|n>>>26)+i|0,r+=(i^(n|~a))+e[7]+1126891415|0,r=(r<<10|r>>>22)+n|0,a+=(n^(r|~i))+e[14]-1416354905|0,a=(a<<15|a>>>17)+r|0,i+=(r^(a|~n))+e[5]-57434055|0,i=(i<<21|i>>>11)+a|0,n+=(a^(i|~r))+e[12]+1700485571|0,n=(n<<6|n>>>26)+i|0,r+=(i^(n|~a))+e[3]-1894986606|0,r=(r<<10|r>>>22)+n|0,a+=(n^(r|~i))+e[10]-1051523|0,a=(a<<15|a>>>17)+r|0,i+=(r^(a|~n))+e[1]-2054922799|0,i=(i<<21|i>>>11)+a|0,n+=(a^(i|~r))+e[8]+1873313359|0,n=(n<<6|n>>>26)+i|0,r+=(i^(n|~a))+e[15]-30611744|0,r=(r<<10|r>>>22)+n|0,a+=(n^(r|~i))+e[6]-1560198380|0,a=(a<<15|a>>>17)+r|0,i+=(r^(a|~n))+e[13]+1309151649|0,i=(i<<21|i>>>11)+a|0,n+=(a^(i|~r))+e[4]-145523070|0,n=(n<<6|n>>>26)+i|0,r+=(i^(n|~a))+e[11]-1120210379|0,r=(r<<10|r>>>22)+n|0,a+=(n^(r|~i))+e[2]+718787259|0,a=(a<<15|a>>>17)+r|0,i+=(r^(a|~n))+e[9]-343485551|0,i=(i<<21|i>>>11)+a|0,t[0]=n+t[0]|0,t[1]=i+t[1]|0,t[2]=a+t[2]|0,t[3]=r+t[3]|0}function i(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function a(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return n}function r(t){var e,a,r,s,o,l,c=t.length,u=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=c;e+=64)n(u,i(t.substring(e-64,e)));for(t=t.substring(e-64),a=t.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<a;e+=1)r[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(n(u,r),e=0;e<16;e+=1)r[e]=0;return s=8*c,s=s.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(s[2],16),l=parseInt(s[1],16)||0,r[14]=o,r[15]=l,n(u,r),u}function s(t){var e,i,r,s,o,l,c=t.length,u=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=c;e+=64)n(u,a(t.subarray(e-64,e)));for(t=e-64<c?t.subarray(e-64):new Uint8Array(0),i=t.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<i;e+=1)r[e>>2]|=t[e]<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(n(u,r),e=0;e<16;e+=1)r[e]=0;return s=8*c,s=s.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(s[2],16),l=parseInt(s[1],16)||0,r[14]=o,r[15]=l,n(u,r),u}function o(t){var n,i="";for(n=0;n<4;n+=1)i+=e[t>>8*n+4&15]+e[t>>8*n&15];return i}function l(t){var e;for(e=0;e<t.length;e+=1)t[e]=o(t[e]);return t.join("")}function c(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function u(t,e){var n,i=t.length,a=new ArrayBuffer(i),r=new Uint8Array(a);for(n=0;n<i;n+=1)r[n]=t.charCodeAt(n);return e?r:a}function h(t){return String.fromCharCode.apply(null,new Uint8Array(t))}function d(t,e,n){var i=new Uint8Array(t.byteLength+e.byteLength);return i.set(new Uint8Array(t)),i.set(new Uint8Array(e),t.byteLength),n?i:i.buffer}function p(t){var e,n=[],i=t.length;for(e=0;e<i-1;e+=2)n.push(parseInt(t.substr(e,2),16));return String.fromCharCode.apply(String,n)}function f(){this.reset()}return"5d41402abc4b2a76b9719d911017c592"!==l(r("hello"))&&function(t,e){var n=(65535&t)+(65535&e),i=(t>>16)+(e>>16)+(n>>16);return i<<16|65535&n},"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(t,e){return t=0|t||0,t<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice=function(n,i){var a,r,s,o,l=this.byteLength,c=e(n,l),u=l;return i!==t&&(u=e(i,l)),c>u?new ArrayBuffer(0):(a=u-c,r=new ArrayBuffer(a),s=new Uint8Array(r),o=new Uint8Array(this,c,a),s.set(o),r)}}(),f.prototype.append=function(t){return this.appendBinary(c(t)),this},f.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var e,a=this._buff.length;for(e=64;e<=a;e+=64)n(this._hash,i(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},f.prototype.end=function(t){var e,n,i=this._buff,a=i.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<a;e+=1)r[e>>2]|=i.charCodeAt(e)<<(e%4<<3);return this._finish(r,a),n=l(this._hash),t&&(n=p(n)),this.reset(),n},f.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},f.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},f.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},f.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},f.prototype._finish=function(t,e){var i,a,r,s=e;if(t[s>>2]|=128<<(s%4<<3),s>55)for(n(this._hash,t),s=0;s<16;s+=1)t[s]=0;i=8*this._length,i=i.toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(i[2],16),r=parseInt(i[1],16)||0,t[14]=a,t[15]=r,n(this._hash,t)},f.hash=function(t,e){return f.hashBinary(c(t),e)},f.hashBinary=function(t,e){var n=r(t),i=l(n);return e?p(i):i},f.ArrayBuffer=function(){this.reset()},f.ArrayBuffer.prototype.append=function(t){var e,i=d(this._buff.buffer,t,!0),r=i.length;for(this._length+=t.byteLength,e=64;e<=r;e+=64)n(this._hash,a(i.subarray(e-64,e)));return this._buff=e-64<r?new Uint8Array(i.buffer.slice(e-64)):new Uint8Array(0),this},f.ArrayBuffer.prototype.end=function(t){var e,n,i=this._buff,a=i.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<a;e+=1)r[e>>2]|=i[e]<<(e%4<<3);return this._finish(r,a),n=l(this._hash),t&&(n=p(n)),this.reset(),n},f.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},f.ArrayBuffer.prototype.getState=function(){var t=f.prototype.getState.call(this);return t.buff=h(t.buff),t},f.ArrayBuffer.prototype.setState=function(t){return t.buff=u(t.buff,!0),f.prototype.setState.call(this,t)},f.ArrayBuffer.prototype.destroy=f.prototype.destroy,f.ArrayBuffer.prototype._finish=f.prototype._finish,f.ArrayBuffer.hash=function(t,e){var n=s(new Uint8Array(t)),i=l(n);return e?p(i):i},f}))},9959:function(t,e,n){},cdf6:function(t,e,n){"use strict";n.r(e);var i=n("1da1"),a=n("d4ec"),r=n("bee2"),s=n("262e"),o=n("2caf"),l=(n("b0c0"),n("96cf"),n("9ab4")),c=n("a026"),u=n("2fe1"),h=n("06a0"),d=(n("cfd7"),n("da90")),p=n("1008"),f=n("d044"),m=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){var t;return Object(a["a"])(this,n),t=e.apply(this,arguments),t.validateName=function(e,n,i){return n?Object(d["a"])(n)?void i():i(new Error(t.$t("NameWarn"))):i(new Error(t.$t("RequiredMissing")))},t.validateNumber=function(e,n,i){return n?Object(d["e"])(n)?void i():i(new Error(t.$t("InvalidNumber"))):i(new Error(t.$t("RequiredMissing")))},t.identity={name:"",number:"",facePhotoId:"",backPhotoId:"",facePhotoKey:"",backPhotoKey:""},t.rules={name:[{required:!0,validator:t.validateName,trigger:"blur"}],number:[{required:!0,validator:t.validateNumber,trigger:"blur"}],facePhotoId:[{required:!0,message:t.$t("RequiredMissing"),trigger:"change"}],backPhotoId:[{required:!0,message:t.$t("RequiredMissing"),trigger:"change"}]},t.originIdentity={},t.photoBack="",t.photoFace="",t.disableBtn=!1,t.infoPromised=!1,t.isShowQrCode=!1,t.qrcodeObj={},t.bgQrcode=p,t}return Object(r["a"])(n,[{key:"created",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getIdentity();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getIdentity",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$http.get("/api/v2/identity/info",{params:{companyId:h["b"].info.companyId}});case 3:e=t.sent,e.data&&-1===e.data.authStatus&&this.$router.push({path:"/"}),!e.data||2!==h["b"].info.company.source&&"CN"===h["b"].info.company.country||this.$router.push({path:"/"}),e.data&&e.data.identity&&e.data.identity.name&&(this.originIdentity=e.data.identity,2!==this.originIdentity.status&&this.back()),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.info(t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"updatePhotoBackURL",value:function(t,e,n){this.photoBack=t,this.identity.backPhotoId=e,this.identity.backPhotoKey=n,this.$refs.backId.clearValidate()}},{key:"updatePhotoFaceURL",value:function(t,e,n){this.photoFace=t,this.identity.facePhotoId=e,this.identity.facePhotoKey=n,this.$refs.faceId.clearValidate()}},{key:"back",value:function(){this.$router.push({path:"/settings/authentication"})}},{key:"save",value:function(){var t=this;this.$refs["submit-form"].validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(n){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=17;break}return i=t.$message.info(t.$t("InSubmitting")),e.prev=2,e.next=5,t.$http.post("/api/v2/identity/person",{name:t.identity.name,IdNumber:t.identity.number});case 5:a=e.sent,a.data.code&&1e3===a.data.code?t.$message.error(t.$t("You have authenticated and do not need to verify again")):(t.qrcodeObj.makeCode(a.data),t.isShowQrCode=!t.isShowQrCode),i.close(),e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](2),t.disableBtn=!1,i.close(),e.t0.response&&9007===e.t0.response.data.code?t.$message.error(t.$t("IDNumberExist")):t.$message.error(t.$t("SubmitFailed"));case 15:e.next=18;break;case 17:return e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}())}},{key:"identityRes",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.post("/api/v2/identity/person/result",{name:this.identity.name,IdNumber:this.identity.number});case 2:e=t.sent,e.data&&0===e.data.code?(this.$message.success(this.$t("Certification Success")),window.location.href="".concat(window.location.origin,"/settings/authentication")):(this.$message.error(this.$t("Certification Fail")),this.$router.push({path:"/settings/authentication"}));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"mounted",value:function(){this.qrcodeObj=new f("qrcode",{width:300,height:300,correctLevel:f.CorrectLevel.H})}}]),n}(c["default"]);m=Object(l["a"])([Object(u["b"])({components:{},template:'\n    <div class="page personAuth">\n      <div class="module-title">{{ $t(\'PersonAuthTitle\') }}</div>\n      <div class="card p-4 my-3 auth-container">\n        <div class="d-flex flex-column pb-2 align-items-baseline border-bottom">\n          <label v-html=\'$t("PersonAuthTips")\'></label>\n        </div>\n        <div v-show="!isShowQrCode" class="form">\n          <div class="submit-form">\n            <el-form :model="identity" :rules="rules" label-width="200px" ref="submit-form">\n              <el-form-item :label="$t(\'PersonFullName\')" prop="name" class="input-item">\n                <el-input v-model="identity.name" maxlength="32"></el-input>\n              </el-form-item>\n              <el-form-item :label="$t(\'PersonIDNumber\')" prop="number" class="input-item">\n                <el-input v-model="identity.number"></el-input>\n              </el-form-item>\n              \x3c!-- <el-form-item :label="$t(\'PhotoWithFace\')" class="input-item" prop="facePhotoId" :inline-message="true" ref="faceId">\n              <AvatarUpload @updateURL="updatePhotoFaceURL"></AvatarUpload>\n              <span class="tip-line">{{ $t(\'PhoneFaceTip\') }}</span>\n            </el-form-item>\n            <el-form-item :label="$t(\'PhotoBack\')" class="input-item" prop="backPhotoId" :inline-message="true" ref="backId">\n              <AvatarUpload @updateURL="updatePhotoBackURL"></AvatarUpload>\n              <span class="tip-line">{{ $t(\'PhoneBackTip\') }}</span>\n            </el-form-item> --\x3e\n            </el-form>\n          </div>\n          <div class="m-auto word-wrapper">\n            <input type="checkbox" v-model="infoPromised" />\n            <span class="ml-1"> {{ $t(\'PromiseInfo\') }} </span>\n          </div>\n          <div class="m-auto">\n            <div class="edit-line">\n              <console-button\n                class="console-btn-primary"\n                size="lg"\n                :disabled="disableBtn || !infoPromised"\n                @click="save"\n              >\n                {{ $t(\'Submit\') }}\n              </console-button>\n              <console-button class="console-btn-white" size="lg" @click="back">\n                {{ $t(\'Cancel\') }}\n              </console-button>\n            </div>\n          </div>\n        </div>\n        <div v-show="isShowQrCode">\n          <div class="alipay">\n            <div id="qrcode" class="qrcode"></div>\n            <img :src="bgQrcode" />\n            <div class="title">{{ $t(\'AliPay Open\') }}</div>\n            <console-button size="lg" @click="identityRes">{{ $t(\'Certification Complete\') }}</console-button>\n          </div>\n        </div>\n      </div>\n    </div>\n  '})],m),e["default"]=m},cfd7:function(t,e,n){},d044:function(t,e,n){var i;(function(e,n){t.exports=n()})(0,(function(){function t(t){this.mode=n.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,i=this.data.length;e<i;e++){var a=[],r=this.data.charCodeAt(e);r>65536?(a[0]=240|(1835008&r)>>>18,a[1]=128|(258048&r)>>>12,a[2]=128|(4032&r)>>>6,a[3]=128|63&r):r>2048?(a[0]=224|(61440&r)>>>12,a[1]=128|(4032&r)>>>6,a[2]=128|63&r):r>128?(a[0]=192|(1984&r)>>>6,a[1]=128|63&r):a[0]=r,this.parsedData.push(a)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}t.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,n=this.parsedData.length;e<n;e++)t.put(this.parsedData[e],8)}},e.prototype={addData:function(e){var n=new t(e);this.dataList.push(n),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,n){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++){this.modules[i]=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++)this.modules[i][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,n),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,n)},setupPositionProbePattern:function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var i=-1;i<=7;i++)e+i<=-1||this.moduleCount<=e+i||(this.modules[t+n][e+i]=0<=n&&n<=6&&(0==i||6==i)||0<=i&&i<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=i&&i<=4)},getBestMaskPattern:function(){for(var t=0,e=0,n=0;n<8;n++){this.makeImpl(!0,n);var i=s.getLostPoint(this);(0==n||t>i)&&(t=i,e=n)}return e},createMovieClip:function(t,e,n){var i=t.createEmptyMovieClip(e,n),a=1;this.make();for(var r=0;r<this.modules.length;r++)for(var s=r*a,o=0;o<this.modules[r].length;o++){var l=o*a,c=this.modules[r][o];c&&(i.beginFill(0,100),i.moveTo(l,s),i.lineTo(l+a,s),i.lineTo(l+a,s+a),i.lineTo(l,s+a),i.endFill())}return i},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=s.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var i=t[e],a=t[n];if(null==this.modules[i][a])for(var r=-2;r<=2;r++)for(var o=-2;o<=2;o++)this.modules[i+r][a+o]=-2==r||2==r||-2==o||2==o||0==r&&0==o}},setupTypeNumber:function(t){for(var e=s.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var i=!t&&1==(e>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=i}for(n=0;n<18;n++){i=!t&&1==(e>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=i}},setupTypeInfo:function(t,e){for(var n=this.errorCorrectLevel<<3|e,i=s.getBCHTypeInfo(n),a=0;a<15;a++){var r=!t&&1==(i>>a&1);a<6?this.modules[a][8]=r:a<8?this.modules[a+1][8]=r:this.modules[this.moduleCount-15+a][8]=r}for(a=0;a<15;a++){r=!t&&1==(i>>a&1);a<8?this.modules[8][this.moduleCount-a-1]=r:a<9?this.modules[8][15-a-1+1]=r:this.modules[8][15-a-1]=r}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var n=-1,i=this.moduleCount-1,a=7,r=0,o=this.moduleCount-1;o>0;o-=2){6==o&&o--;while(1){for(var l=0;l<2;l++)if(null==this.modules[i][o-l]){var c=!1;r<t.length&&(c=1==(t[r]>>>a&1));var u=s.getMask(e,i,o-l);u&&(c=!c),this.modules[i][o-l]=c,a--,-1==a&&(r++,a=7)}if(i+=n,i<0||this.moduleCount<=i){i-=n,n=-n;break}}}}},e.PAD0=236,e.PAD1=17,e.createData=function(t,n,i){for(var a=u.getRSBlocks(t,n),r=new h,o=0;o<i.length;o++){var l=i[o];r.put(l.mode,4),r.put(l.getLength(),s.getLengthInBits(l.mode,t)),l.write(r)}var c=0;for(o=0;o<a.length;o++)c+=a[o].dataCount;if(r.getLengthInBits()>8*c)throw new Error("code length overflow. ("+r.getLengthInBits()+">"+8*c+")");r.getLengthInBits()+4<=8*c&&r.put(0,4);while(r.getLengthInBits()%8!=0)r.putBit(!1);while(1){if(r.getLengthInBits()>=8*c)break;if(r.put(e.PAD0,8),r.getLengthInBits()>=8*c)break;r.put(e.PAD1,8)}return e.createBytes(r,a)},e.createBytes=function(t,e){for(var n=0,i=0,a=0,r=new Array(e.length),o=new Array(e.length),l=0;l<e.length;l++){var u=e[l].dataCount,h=e[l].totalCount-u;i=Math.max(i,u),a=Math.max(a,h),r[l]=new Array(u);for(var d=0;d<r[l].length;d++)r[l][d]=255&t.buffer[d+n];n+=u;var p=s.getErrorCorrectPolynomial(h),f=new c(r[l],p.getLength()-1),m=f.mod(p);o[l]=new Array(p.getLength()-1);for(d=0;d<o[l].length;d++){var g=d+m.getLength()-o[l].length;o[l][d]=g>=0?m.get(g):0}}var v=0;for(d=0;d<e.length;d++)v+=e[d].totalCount;var b=new Array(v),y=0;for(d=0;d<i;d++)for(l=0;l<e.length;l++)d<r[l].length&&(b[y++]=r[l][d]);for(d=0;d<a;d++)for(l=0;l<e.length;l++)d<o[l].length&&(b[y++]=o[l][d]);return b};for(var n={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},a={L:1,M:0,Q:3,H:2},r={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},s={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){var e=t<<10;while(s.getBCHDigit(e)-s.getBCHDigit(s.G15)>=0)e^=s.G15<<s.getBCHDigit(e)-s.getBCHDigit(s.G15);return(t<<10|e)^s.G15_MASK},getBCHTypeNumber:function(t){var e=t<<12;while(s.getBCHDigit(e)-s.getBCHDigit(s.G18)>=0)e^=s.G18<<s.getBCHDigit(e)-s.getBCHDigit(s.G18);return t<<12|e},getBCHDigit:function(t){var e=0;while(0!=t)e++,t>>>=1;return e},getPatternPosition:function(t){return s.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case r.PATTERN000:return(e+n)%2==0;case r.PATTERN001:return e%2==0;case r.PATTERN010:return n%3==0;case r.PATTERN011:return(e+n)%3==0;case r.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case r.PATTERN101:return e*n%2+e*n%3==0;case r.PATTERN110:return(e*n%2+e*n%3)%2==0;case r.PATTERN111:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new c([1],0),n=0;n<t;n++)e=e.multiply(new c([1,o.gexp(n)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:return 8;case n.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,i=0;i<e;i++)for(var a=0;a<e;a++){for(var r=0,s=t.isDark(i,a),o=-1;o<=1;o++)if(!(i+o<0||e<=i+o))for(var l=-1;l<=1;l++)a+l<0||e<=a+l||0==o&&0==l||s==t.isDark(i+o,a+l)&&r++;r>5&&(n+=3+r-5)}for(i=0;i<e-1;i++)for(a=0;a<e-1;a++){var c=0;t.isDark(i,a)&&c++,t.isDark(i+1,a)&&c++,t.isDark(i,a+1)&&c++,t.isDark(i+1,a+1)&&c++,0!=c&&4!=c||(n+=3)}for(i=0;i<e;i++)for(a=0;a<e-6;a++)t.isDark(i,a)&&!t.isDark(i,a+1)&&t.isDark(i,a+2)&&t.isDark(i,a+3)&&t.isDark(i,a+4)&&!t.isDark(i,a+5)&&t.isDark(i,a+6)&&(n+=40);for(a=0;a<e;a++)for(i=0;i<e-6;i++)t.isDark(i,a)&&!t.isDark(i+1,a)&&t.isDark(i+2,a)&&t.isDark(i+3,a)&&t.isDark(i+4,a)&&!t.isDark(i+5,a)&&t.isDark(i+6,a)&&(n+=40);var u=0;for(a=0;a<e;a++)for(i=0;i<e;i++)t.isDark(i,a)&&u++;var h=Math.abs(100*u/e/e-50)/5;return n+=10*h,n}},o={glog:function(t){if(t<1)throw new Error("glog("+t+")");return o.LOG_TABLE[t]},gexp:function(t){while(t<0)t+=255;while(t>=256)t-=255;return o.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},l=0;l<8;l++)o.EXP_TABLE[l]=1<<l;for(l=8;l<256;l++)o.EXP_TABLE[l]=o.EXP_TABLE[l-4]^o.EXP_TABLE[l-5]^o.EXP_TABLE[l-6]^o.EXP_TABLE[l-8];for(l=0;l<255;l++)o.LOG_TABLE[o.EXP_TABLE[l]]=l;function c(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);var n=0;while(n<t.length&&0==t[n])n++;this.num=new Array(t.length-n+e);for(var i=0;i<t.length-n;i++)this.num[i]=t[i+n]}function u(t,e){this.totalCount=t,this.dataCount=e}function h(){this.buffer=[],this.length=0}c.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var i=0;i<t.getLength();i++)e[n+i]^=o.gexp(o.glog(this.get(n))+o.glog(t.get(i)));return new c(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=o.glog(this.get(0))-o.glog(t.get(0)),n=new Array(this.getLength()),i=0;i<this.getLength();i++)n[i]=this.get(i);for(i=0;i<t.getLength();i++)n[i]^=o.gexp(o.glog(t.get(i))+e);return new c(n,0).mod(t)}},u.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],u.getRSBlocks=function(t,e){var n=u.getRsBlockTable(t,e);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var i=n.length/3,a=[],r=0;r<i;r++)for(var s=n[3*r+0],o=n[3*r+1],l=n[3*r+2],c=0;c<s;c++)a.push(new u(o,l));return a},u.getRsBlockTable=function(t,e){switch(e){case a.L:return u.RS_BLOCK_TABLE[4*(t-1)+0];case a.M:return u.RS_BLOCK_TABLE[4*(t-1)+1];case a.Q:return u.RS_BLOCK_TABLE[4*(t-1)+2];case a.H:return u.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},h.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var d=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function p(){return"undefined"!=typeof CanvasRenderingContext2D}function f(){var t=!1,e=navigator.userAgent;if(/android/i.test(e)){t=!0;var n=e.toString().match(/android ([0-9]\.[0-9])/i);n&&n[1]&&(t=parseFloat(n[1]))}return t}var m=function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){var e=this._htOption,n=this._el,i=t.getModuleCount();Math.floor(e.width/i),Math.floor(e.height/i);function a(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg",t);for(var i in e)e.hasOwnProperty(i)&&n.setAttribute(i,e[i]);return n}this.clear();var r=a("svg",{viewBox:"0 0 "+String(i)+" "+String(i),width:"100%",height:"100%",fill:e.colorLight});r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),n.appendChild(r),r.appendChild(a("rect",{fill:e.colorLight,width:"100%",height:"100%"})),r.appendChild(a("rect",{fill:e.colorDark,width:"1",height:"1",id:"template"}));for(var s=0;s<i;s++)for(var o=0;o<i;o++)if(t.isDark(s,o)){var l=a("use",{x:String(o),y:String(s)});l.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),r.appendChild(l)}},t.prototype.clear=function(){while(this._el.hasChildNodes())this._el.removeChild(this._el.lastChild)},t}(),g="svg"===document.documentElement.tagName.toLowerCase(),v=g?m:p()?function(){function t(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}if(this._android&&this._android<=2.1){var e=1/window.devicePixelRatio,n=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(t,i,a,r,s,o,l,c,u){if("nodeName"in t&&/img/i.test(t.nodeName))for(var h=arguments.length-1;h>=1;h--)arguments[h]=arguments[h]*e;else"undefined"==typeof c&&(arguments[1]*=e,arguments[2]*=e,arguments[3]*=e,arguments[4]*=e);n.apply(this,arguments)}}function i(t,e){var n=this;if(n._fFail=e,n._fSuccess=t,null===n._bSupportDataURI){var i=document.createElement("img"),a=function(){n._bSupportDataURI=!1,n._fFail&&n._fFail.call(n)},r=function(){n._bSupportDataURI=!0,n._fSuccess&&n._fSuccess.call(n)};return i.onabort=a,i.onerror=a,i.onload=r,void(i.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}!0===n._bSupportDataURI&&n._fSuccess?n._fSuccess.call(n):!1===n._bSupportDataURI&&n._fFail&&n._fFail.call(n)}var a=function(t,e){this._bIsPainted=!1,this._android=f(),this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return a.prototype.draw=function(t){var e=this._elImage,n=this._oContext,i=this._htOption,a=t.getModuleCount(),r=i.width/a,s=i.height/a,o=Math.round(r),l=Math.round(s);e.style.display="none",this.clear();for(var c=0;c<a;c++)for(var u=0;u<a;u++){var h=t.isDark(c,u),d=u*r,p=c*s;n.strokeStyle=h?i.colorDark:i.colorLight,n.lineWidth=1,n.fillStyle=h?i.colorDark:i.colorLight,n.fillRect(d,p,r,s),n.strokeRect(Math.floor(d)+.5,Math.floor(p)+.5,o,l),n.strokeRect(Math.ceil(d)-.5,Math.ceil(p)-.5,o,l)}this._bIsPainted=!0},a.prototype.makeImage=function(){this._bIsPainted&&i.call(this,t)},a.prototype.isPainted=function(){return this._bIsPainted},a.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},a.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},a}():function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){for(var e=this._htOption,n=this._el,i=t.getModuleCount(),a=Math.floor(e.width/i),r=Math.floor(e.height/i),s=['<table style="border:0;border-collapse:collapse;">'],o=0;o<i;o++){s.push("<tr>");for(var l=0;l<i;l++)s.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+a+"px;height:"+r+"px;background-color:"+(t.isDark(o,l)?e.colorDark:e.colorLight)+';"></td>');s.push("</tr>")}s.push("</table>"),n.innerHTML=s.join("");var c=n.childNodes[0],u=(e.width-c.offsetWidth)/2,h=(e.height-c.offsetHeight)/2;u>0&&h>0&&(c.style.margin=h+"px "+u+"px")},t.prototype.clear=function(){this._el.innerHTML=""},t}();function b(t,e){for(var n=1,i=y(t),r=0,s=d.length;r<=s;r++){var o=0;switch(e){case a.L:o=d[r][0];break;case a.M:o=d[r][1];break;case a.Q:o=d[r][2];break;case a.H:o=d[r][3];break}if(i<=o)break;n++}if(n>d.length)throw new Error("Too long data");return n}function y(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}return i=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:a.H},"string"===typeof e&&(e={text:e}),e)for(var n in e)this._htOption[n]=e[n];"string"==typeof t&&(t=document.getElementById(t)),this._htOption.useSVG&&(v=m),this._android=f(),this._el=t,this._oQRCode=null,this._oDrawing=new v(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},i.prototype.makeCode=function(t){this._oQRCode=new e(b(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},i.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},i.prototype.clear=function(){this._oDrawing.clear()},i.CorrectLevel=a,i}))},f6d3:function(t,e,n){"use strict";n.r(e);var i=n("1da1"),a=n("d4ec"),r=n("bee2"),s=n("262e"),o=n("2caf"),l=(n("b64b"),n("96cf"),n("9ab4")),c=n("a026"),u=n("2fe1"),h=n("06a0"),d=n("c1df"),p=n.n(d),f={Exemption:-1,NotSubmitted:-2,Submitted:0,Approved:1,Rejected:2},m=(n("cfd7"),n("d71c")),g=n("7e3f"),v=n("bba2"),b=n("c008"),y=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){var t;return Object(a["a"])(this,n),t=e.apply(this,arguments),t.loading=!1,t.identity=!1,t.authStatus=0,t.moment=p.a,t.identityStatus=f,t.iconPerson=m,t.iconEnterprise=g,t.iconCheck=v,t.iconChecking=b,t.personAuth=!1,t.companyAuth=!1,t}return Object(r["a"])(n,[{key:"created",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,this.getIdentity();case 4:this.loading=!1,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),this.$message.error(this.$t("GetIndentityFailed"));case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"getIdentity",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$http.get("/api/v2/identity/info",{params:{companyId:h["b"].info.companyId}});case 3:e=t.sent,e.data&&e.data.authStatus===this.identityStatus.Exemption&&this.$router.push({path:"/"}),!e.data||2!==h["b"].info.company.source&&"CN"===h["b"].info.company.country||this.$router.push({path:"/"}),e.data&&e.data.identity&&Object.keys(e.data.identity).length>0&&(this.identity=e.data.identity,this.authStatus=e.data.authStatus,this.personAuth=!(this.authStatus===this.identityStatus.Rejected||this.authStatus===this.identityStatus.NotSubmitted),this.companyAuth=!(0!==this.identity.identityType||this.authStatus===this.identityStatus.Rejected||this.authStatus===this.identityStatus.NotSubmitted)),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),this.$message.error(this.$t("GetIndentityFailed"));case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"goToAuth",value:function(t){var e=this;"enterprise"===t?this.$confirm(this.$t("EnterpriseConfirm"),this.$t("EnterpriseTitle"),{confirmButtonText:this.$t("ContinueEnterprise"),cancelButtonText:this.$t("Cancel"),customClass:"message-box-warning"}).then((function(){e.$router.push({path:"/settings/authentication/enterprise"})})).catch((function(){})):"person"===t&&this.$router.push({path:"/settings/authentication/person"})}},{key:"viewAuth",value:function(t){"enterprise"===t?this.$router.push({path:"/settings/authentication/enterprise"}):this.$router.push({path:"/settings/authentication/person"})}},{key:"getTime",value:function(){if(this.identity.submitTime)return p()(this.identity.submitTime).format("YYYY/MM/DD HH:mm");var t=p()().utcOffset();return t>0?this.identity.createdAt&&p()(this.identity.createdAt).add(p()().utcOffset(),"m").format("YYYY/MM/DD HH:mm"):this.identity.createdAt&&p()(this.identity.createdAt).subtract(Math.abs(p()().utcOffset()),"m").format("YYYY/MM/DD HH:mm")}},{key:"backToMain",value:function(){this.$router.push("/")}}]),n}(c["default"]);y=Object(l["a"])([Object(u["b"])({components:{},template:'\n    <div class="page" v-loading="loading">\n      <div class="module-title">{{ $t(\'AuthPageTitle\') }}</div>\n      <div class="card auth-container module-title-tip">\n        <div class="d-flex flex-column align-items-baseline" v-html="$t(\'AuthenticationTips\')"></div>\n      </div>\n      <div class="auth-items">\n        <div class="card mb-20" v-if="!identity || identity.identityType !== 0">\n          <div class="auth-item-horizontal">\n            <div class="d-flex item-left">\n              <div class="item-icon">\n                <img :src="iconPerson" />\n              </div>\n              <div>\n                <div class="auth-title">\n                  {{ $t(\'PersonalTitle\') }}\n                  <span class="ml-20" v-if="personAuth">\n                    <img :src="iconCheck" width="17" height="17" class="icon-check" />\n                    {{ $t(\'Approved\') }}\n                  </span>\n                  <span class="days-tip ml-20" v-if="!personAuth">{{ $t(\'Immediately\') }}</span>\n                </div>\n                <div class="auth-desc mb-20" v-if="!personAuth">\n                  {{ $t(\'PersonDesc\') }}\n                </div>\n                <div class="auth-desc mb-20" v-else>\n                  <div class="detail-row">\n                    <label class="info-title"> {{ $t(\'SubmittedTime\') }}: </label>\n                    <label class="row-info"> {{ getTime() }} </label>\n                  </div>\n                  <div class="detail-row">\n                    <label class="info-title"> {{ $t(\'Method\') }}: </label>\n                    <label class="row-info" v-if="identity.identityType === 1">\n                      {{ $t(\'Person Certification/Alipay Certification\') }}\n                    </label>\n                    <label class="row-info" v-if="identity.authType === 1"> {{ $t(\'ZhimaAuth\') }} </label>\n                  </div>\n                </div>\n                <div class="d-flex align-center" v-if="!personAuth">\n                  <console-button class="console-btn-primary auth-btn mr-10" @click="goToAuth(\'person\')">{{\n                    $t(\'GetStart\')\n                  }}</console-button>\n                  <span class="link">\n                    <a target="_blank" :href="$t(\'PersonDocLink\')">{{ $t(\'PersonDoc\') }}</a>\n                  </span>\n                </div>\n                <console-button v-else class="console-btn-white auth-btn auth-btn-white" @click="backToMain">{{\n                  $t(\'BackToMain\')\n                }}</console-button>\n              </div>\n            </div>\n          </div>\n          <div class="auth-item-horizontal">\n            <div class="auth-desc">\n              <p>{{ $t(\'PersonalMinimumBalance\') }}</p>\n              <p>{{ $t(\'PersonalGracePeriod\') }}</p>\n              <p>{{ $t(\'Support\') }}</p>\n            </div>\n          </div>\n        </div>\n        <div class="card">\n          <div class="auth-item-horizontal">\n            <div class="d-flex item-left">\n              <div class="item-icon">\n                <img :src="iconEnterprise" />\n              </div>\n              <div>\n                <div class="auth-title">\n                  {{ $t(\'EnterpriseTitle\') }}\n                  <span class="days-tip ml-20" v-if="!companyAuth">{{ $t(\'1-3 days\') }}</span>\n                  <span class="days-tip ml-20" v-else-if="authStatus === identityStatus.Submitted">\n                    <img :src="iconChecking" width="20" height="20" class="icon-check" />\n                    {{ $t(\'Submitted\') }}</span\n                  >\n                  <span class="days-tip ml-20" v-else-if="authStatus === identityStatus.Approved">\n                    <img :src="iconCheck" width="17" height="17" class="icon-check" />\n                    {{ $t(\'Approved\') }}</span\n                  >\n                </div>\n                <div class="auth-desc mb-20" v-if="identity.identityType == 0">\n                  <div class="detail-row">\n                    <label class="info-title"> {{ $t(\'SubmittedTime\') }}: </label>\n                    <label class="row-info"> {{ getTime() }} </label>\n                  </div>\n                  <div class="detail-row">\n                    <label class="info-title"> {{ $t(\'Method\') }}: </label>\n                    <label class="row-info" v-if="identity.identityType === 0 && !identity.bankAccount">\n                      {{ $t(\'ManualAuth\') }}\n                    </label>\n                    <label class="row-info" v-if="identity.identityType === 0 && identity.bankAccount">\n                      {{ $t(\'TransferAuth\') }}\n                    </label>\n                    <label class="row-info" v-if="identity.authType === 1"> {{ $t(\'ZhimaAuth\') }} </label>\n                  </div>\n                </div>\n                <div class="auth-desc mb-20" v-else>{{ $t(\'EnterpriseDesc\') }}</div>\n                <div class="d-flex align-center" v-if="!companyAuth">\n                  <console-button class="console-btn-primary auth-btn mr-10" @click="goToAuth(\'enterprise\')">{{\n                    $t(\'GetStart\')\n                  }}</console-button>\n                  <span class="link">\n                    <a target="_blank" :href="$t(\'EnterpriseDocLink\')">{{ $t(\'EnterpriseDoc\') }}</a>\n                  </span>\n                </div>\n                <div v-if="identity.identityType === 0 && authStatus === identityStatus.Submitted">\n                  <console-button class="console-btn-white auth-btn auth-btn-white" @click="viewAuth(\'enterprise\')">{{\n                    $t(\'View Auth\')\n                  }}</console-button>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class="auth-item-horizontal">\n            <div class="auth-desc">\n              <p>{{ $t(\'PaymentPlan\') }}</p>\n              <p>{{ $t(\'BillingCycle\') }}</p>\n              <p>{{ $t(\'CompanyMinimumBalance\') }}</p>\n              <p>{{ $t(\'CompanyGracePeriod\') }}</p>\n              <p>{{ $t(\'CompanySupportPackage\') }}</p>\n              <p>{{ $t(\'CanRefund\') }}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  '})],y);e["default"]=y}}]);